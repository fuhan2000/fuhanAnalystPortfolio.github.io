<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Monthly Trend of Balance</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class=""></a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Portfolio Main Page</a></li>

						</ul>
						<ul class="icons">
							<li><a href="https://www.linkedin.com/in/fuhhanchang/" class="icon brands alt fa-linkedin"><span class="label">linkedin</span></a></li>
							<li><a href="https://github.com/fuhan2000" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									
									<h1>Using Matplotlib <br />
										</h1>
									<p>Here we will do two plots on the same axes with different left and right scales.</p>
								</header>

								<div class="image main"><img src="images/matplotlib_proj/mtob_transa.png" alt="" /></div>
								<p>Imagine we are a bank tracking the monthly trend of balance in our customers' account and the number of transactions they make. <br/> </p>

								
								<p><br/></p>
								<h2>Importing Libraries</h2>
								<p>We need to import matplotlib.pyplot, numpy and pandas.</p>
								<blockquote># Import Matplotlib and allow plots to show in the Jupyter Notebook<br/>
									import matplotlib.pyplot as plt<br/>
									%matplotlib inline<br/>
									<p><br/></p>
									# need this to plot at multiples of 10000000 on y-axis<br/>
									from matplotlib.ticker import (MultipleLocator, AutoMinorLocator)<br/>
									<p><br/></p>
									# Import NumPy and Pandas<br/>
									import numpy as np<br/>
									import pandas as pd<br/>
									<p><br/></p>
									# Auto reloads notebook when changes are made<br/>
									%reload_ext autoreload<br/>
									%autoreload 2</blockquote>

								<h2>Import data into a data frame</h2>
								<blockquote>mtob_transac_df = pd.read_csv(r'E:\project\matplotlib_project\monthly_trend_of_balance_transac.csv')<br/>
									mtob_transac_df</blockquote>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/matplotlib_proj/mtob_trans_df.png" alt=""></div></figure>
								<p><br/></p>
								<h2>Converting to Numpy array</h2>
								<blockquote># Convert from Pandas to NumPy array<br/>
									np_arr = mtob_transac_df.to_numpy()<br/>
									np_arr</blockquote>
									<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/matplotlib_proj/mtob_trans_array.png" alt=""></div></figure>
								<p><br/></p>
								<h2>Get ready x and y</h2>
								<blockquote>x_1 = np_arr[:,0]<br/>
									y_1 = np_arr[:,1]<br/>
									y_2 = np_arr[:,2]</blockquote>
								<p><br/></p>
								<h2>Plot the graph</h2>
								<blockquote># Define width & height in inches<br/>
									# Dots per inch<br/>
									#<br/>
									fig_1 = plt.figure(figsize=(6,4),dpi=100)<br/>
									# Adds axes with a left, bottom, width and height that ranges from 0 to 1<br/>
									# which is the percent of the canvas you want to use<br/>
									#<br/>
									axes_1 = fig_1.add_axes([0,0,1,1])<br/>
									<p><br/></p>
									# Set lables and title<br/>
									axes_1.set_xlabel('Month')<br/>
									axes_1.set_ylabel('Amount')<br/>
									axes_1.set_title('Monthly Trend of Amount and # transactions')<br/>
									# plot lines in blue<br/>
									# select marker to match source<br/>
									#<br/>
									axes_1.plot(x_1,y_1, color = 'blue', marker='o', markersize = 4)<br/>
									<p><br/></p>
									# major ticks at multiples of 10000000<br/>
									# Label major ticks with '.0f' formatting<br/>
									#<br/>
									axes_1.yaxis.set_major_locator(MultipleLocator(10000000))<br/>
									axes_1.yaxis.set_major_formatter('{x:.0f}')<br/>
									<p><br/></p>
									# set the ylimits to match source<br/>
									#<br/>
									axes_1.set_ylim([-30000000, 40000000])<br/>
									<p><br/></p>
									# `ha` is just shorthand for horizontalalignment<br/>
									# xlabel looks better with ha set this way.<br/>
									plt.xticks(rotation = 25, ha='right')<br/>
									<br/>
									axes_2= axes_1.twinx()<br/>
									axes_2.set_ylabel('#transactions')<br/>
									axes_2.plot(x_1, y_2, color ='cyan', marker='x', markersize = 4)<br/>
									# major ticks at multiple of 5000<br/>
									axes_2.yaxis.set_major_locator(MultipleLocator(5000))<br/>
									axes_2.yaxis.set_major_formatter('{x:.0f}')<br/>
									#adjust the ylimit for readability<br/>
									axes_2.set_ylim([0, 40000])<br/>
									<p><br/></p>
									# annotate plots<br/>
									# adjust values as necessary for readability<br/>
									axes_1.text(0, 27000000, 'Amount', color = 'blue')<br/>
									axes_1.text(0, -12000000, '#transactions', color = 'cyan')</blockquote>
								<h2>Graph Output</h2>
								<p><br/></p>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/matplotlib_proj/mtob_transa.png" alt=""></div></figure>
								<p><br/></p>


								<h2>Comments</h2>
								<p>Amount is on the left axis and number of transactions is on the right. Major ticks on amount axis is in multiple of 10,000,000. 
									It is in multiple of 5000 on the right. Amount is plotted in blue with 'o' as marker. #transactions is in cyan with 'x' as marker. 
									I could have use a legend but this will take up too much space. Instead i annotate inside the graph with axes_1.text() with matching colors.</p>

									<p>A person looking at the graph will notice the sharp drop in Jan 2013 amount accompanied by rise in number of transactions. The bank might want to follow up with further analysis.</p>

								



								
								


							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<nav id="nav">
							<ul class="links">
								<li><a href="index.html">Portfolio Main Page</a></li>
	
							</ul>
						</nav>

						<section class="split contact">




						</section>
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; fuhan</li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>