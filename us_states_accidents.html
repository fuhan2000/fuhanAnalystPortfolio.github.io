<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>US States Accidents</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class=""></a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Portfolio Main Page</a></li>

						</ul>
						<ul class="icons">
							<li><a href="https://www.linkedin.com/in/fuhhanchang/" class="icon brands alt fa-linkedin"><span class="label">linkedin</span></a></li>
							<li><a href="https://github.com/fuhan2000" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									
									<h1>US States Accidents<br />
									</h1>
									<p>After EDA, I did a more detailed analysis on states with SQL, Excel and Tableau.</p>
								</header>
								<div class="image main"><img src="images/us_accident_sm.jpg" alt="" /></div>
								<h2>Importing 3M records into SQL</h2>

								<p>The Description column is too long and its commas keep messing up the import process. Resolved by keeping only ID, Start_Time , Start_Lat , Start_Lng , State.</p>
								
								<blockquote>drop table us_accident;<br/>

								CREATE TABLE us_accident (<br/>
								ID VARCHAR(10), Start_Time VARCHAR(35), Start_Lat VARCHAR(35), Start_Lng VARCHAR(35), State VARCHAR(3) ;</blockquote>
								<p><br/></p>
								<blockquote>LOAD DATA INFILE 'C:/ProgramData/MySQL/MySQL Server 5.7/Uploads/US_Accidents_copy.csv'<br/>
								INTO TABLE us_accident<br/>
								FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n'<br/>
								IGNORE 1 ROWS<br/>
								(ID, Start_Time, Start_Lat, Start_Lng, State);</blockquote>
								<p><br/></p>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/allrows.png" alt=""></div></figure>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/result_grid.png" alt=""></div></figure>
								<p>Finally success in importing all 3M records into SQL.</p>
								<h2>Checking NaN in our dataset</h2>
								<p>During EDA it has been confirmed there are no NaN in these five columns.</p>
								
								

								<h2>Getting population data for states</h2>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/opendata.png" alt=""></div></figure>
								<p>I will get my data from opendatanetwork.com. I will need these for accidents per 100k population.</p>
								
								<p><br/></p>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/alaba.png" alt=""></div></figure>
								<p>They have actual figures for 2016 - 2018. Forecasted figures for 2019 - 2020.<br/>
								Above is data for Alabama.</p>
								

								<h2>US states abbreviations</h2>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/abbre.png" alt=""></div></figure>
								<p>I refer to Wikipedia for states abbreviations.</p>

								<h2>selecting columns in SQL and copying it to an Excel file</h2>
								<blockquote>select State, Year(Start_Time), count(ID) as NumofAccidents from us_accident<br/>
								Group by State, Year(Start_Time);</blockquote>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/state_cols.png" alt=""></div></figure>
								<p><br/></p>
								<h2>Further data processing on Excel</h2>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/state_xcel.png" alt=""></div></figure>
								<p>Column E is C/D.<br/>
								Column F is (C/D)*100000 human population.</p>

								<h2>Create a Pivot Table</h2>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/pivot_b4.png" alt=""></div></figure>
								<p>Select the required range.</p>
								<p><br/></p>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/pivot_after.png" alt=""></div></figure>
								<p>Pivot table created.<br/>
								We now have the data for 49 states by year.</p>

								<h2>Create View in SQL</h2>
								<blockquote>create view state_year as <br/>
								select State, Year(Start_Time), count(ID) as NumofAccidents from us_accident <br/>
								Group by State, Year(Start_Time);</blockquote>
								<p>You can create a view.</p>
								<blockquote>select * from state_year;</blockquote>
								<p>You can query the view later on with one line.</p>

								<h2>Tableau Public</h2>
								<p>Tableau Public cannot connect to SQL.<br/>
								So we will import excel data into Tableau.</p>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/states_geo.png" alt=""></div></figure>
								<p>Assign Geographic Role to States.</p>

								<h2>US States 2016</h2>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/us_2016.png" alt=""></div></figure>
								<p>I switch from default blue to orange.<br/>
								The darker the orange the higher the accident rates. I did the same for 2017 - 2020.</p>
								
								<h2>Dashboard 2016</h2>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/db_2016.png" alt=""></div></figure>
								<p>CA has the highest accident rates per 100k human inhabitants. Hence CA has the darkest orange.</p>

								<h2>Dashboard 2020</h2>
								<figure style="max-width:2388pxpx" class="w-richtext-align-fullwidth w-richtext-figure-type-image"><div><img src="images/us_states_accidents/db_2020.png" alt=""></div></figure>
								<p>In 2020, CA has fallen to 3rd place. SC is now in first place. <br/>
								These changes are reflected in the map as well.</p>

								<h2>Conclusion</h2>
								<ol start="1" role="list"><li>You need to know your data. I know Description is not needed here so i drop it.</li>
									<li>You have to incorporate data from other sources. By knowing the states' population, i can calculate the accident rates per 100k of inhabitants. </li>
									<li>It is good practice to use visuals to tell a story. It helps in reader's understanding.</li>
									<li>SQL, Excel and Tableau each have their own strengths. SQL for database query, Excel for ease of data manipulation and Tableau for visuals.</li>
								</ol>
								
								<h2>Next Step</h2>
								<p>I may do an interactive dashboard.</p>

							</section>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<nav id="nav">
							<ul class="links">
								<li><a href="index.html">Portfolio Main Page</a></li>
	
							</ul>
						</nav>

						<section class="split contact">




						</section>
					</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; fuhan</li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>